(function(){"use strict";let h,_,u="default",g;const b=document.getElementById("wmt-init-script");if(b){const e=new URL(b.src),t=new URLSearchParams(e.search);h=(t.get("types")||"").split("|"),_=t.get("wa")||void 0,u=t.get("tag")||"default",g=encodeURIComponent(t.get("wa")||"")}if(!h||!_)throw"Missing parameters! Could not initialise WM Tools.";fetch(`undefinedtools/${g}/${u}`).then(e=>e.json()).then(e=>{E(h,_,e)}).catch(e=>console.log(e));const T=()=>{const e=document.createElement("div"),t=e.attachShadow({mode:"open"});return{shadowHost:e,shadowRoot:t}},k=e=>{const t=document.createElement("link");t.rel="monetization",t.href=`https://${e}`,document.head.appendChild(t)},y=e=>{const t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=`undefined${e}`,t},L=["Cookie","Roboto","Open Sans","Titillium Web","Arial"],f=(e,t="banner")=>{const a=document.getElementById(`wmt-font-family-${t}`);a&&a.remove();let n="inherit";if(L.indexOf(e)!=-1&&(n=e),n=="inherit")return;const o=document.createElement("link");switch(o.id=`wmt-font-family-${t}`,o.rel="stylesheet",o.type="text/css",n){case"Open Sans":o.href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap";break;case"Cookie":o.href="https://fonts.googleapis.com/css2?family=Cookie&display=swap";break;case"Roboto":o.href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap";break;default:o.href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&display=swap"}return{fontFamily:o,selectedFont:n}},E=(e,t,a)=>{const{shadowHost:n,shadowRoot:o}=T();k(t);for(const r in e)switch(e[Number(r)]){case"widget":{const i=f(a.widgetFontName,"widget");n.style.setProperty("--wmt-widget-font",i!=null&&i.selectedFont?i.selectedFont:"inherit"),n.style.setProperty("--wmt-widget-font-size",a.widgetFontSize);const w=y("css/widget.css"),m=R(t,a);o.appendChild(w),o.appendChild(m),i!=null&&i.fontFamily&&document.body.appendChild(i.fontFamily),document.body.appendChild(n);break}case"banner":default:const s=f(a.bannerFontName,"banner");n.style.setProperty("--wmt-banner-font",s!=null&&s.selectedFont?s.selectedFont:"inherit"),n.style.setProperty("--wmt-banner-font-size",a.bannerFontSize);const l=y("css/banner.css"),c=x(a);c&&(o.appendChild(l),o.appendChild(c)),s!=null&&s.fontFamily&&document.body.appendChild(s.fontFamily),document.body.appendChild(n)}},x=e=>{const t=sessionStorage.getItem("_wm_tools_closed_by_user"),a=document.querySelector("link[rel=monetization]");if(a&&a.relList.supports("monetization")||t)return;const n=document.createElement("div");n.className="_wm_tools_banner";const o=e.bannerPosition?e.bannerPosition.toLowerCase():"bottom";if(n.classList.add(`_wm_tools_banner_${o}`),e.bannerSlideAnimation!="None"){const p=e.bannerSlideAnimation&&o=="top"?"down":"up";n.classList.add(`_wm_tools_banner_${p}`)}n.style.color=e.bannerTextColor,n.style.backgroundColor=e.bannerBackgroundColor;const r=e.bannerBorder=="Light"?"0.375rem":e.bannerBorder=="Pill"?"1rem":"0";n.style.borderRadius=r;const d=document.createElement("div");if(d.className="_wm_tools_banner_header",e.bannerTitleText){const p=document.createElement("h5"),v=document.createTextNode(e.bannerTitleText);p.appendChild(v),d.appendChild(p)}else{const p=document.createElement("span");d.appendChild(p)}const s=document.createElement("span"),l=document.createTextNode("x");s.appendChild(l),s.addEventListener("click",()=>{sessionStorage.setItem("_wm_tools_closed_by_user","true"),n.classList.add("_wm_tools_hidden")}),d.appendChild(s),n.appendChild(d);const c=document.createElement("span"),i=document.createTextNode(e.bannerDescriptionText);c.appendChild(i),n.appendChild(c);const w=document.createElement("span");w.className="_wm_link";const m=document.createElement("a");m.rel="noindex nofollow",m.target="_blank",m.href=C();const N=document.createTextNode(F());return m.appendChild(N),w.appendChild(m),n.appendChild(w),n},C=()=>{const e=navigator.userAgent;return e.includes("Firefox")?"https://addons.mozilla.org/en-US/firefox/addon/web-monetization-extension/":e.includes("Chrome")&&!e.includes("Edg")&&!e.includes("OPR")?"https://chromewebstore.google.com/detail/web-monetization/oiabcfomehhigdepbbclppomkhlknpii":e.includes("Edg")?"https://microsoftedge.microsoft.com/addons/detail/web-monetization/imjgemgmeoioefpmfefmffbboogighjl":"https://webmonetization.org/"},F=()=>C()==="https://webmonetization.org/"?"Learn more":"Get the extension",R=(e,t)=>{const a=window.innerHeight,n=window.innerWidth,o=document.createElement("div");o.className="_wm_tools_widget";const r=document.createElement("div");r.className="_wm_tools_widget_content",r.style.color=t.widgetTextColor,r.style.backgroundColor=t.widgetBackgroundColor;const d=t.css||void 0;let s=`undefined?receiver=https://${encodeURI(e||"")}&`;t.widgetButtonText&&(s+=`action=${encodeURI(t.widgetButtonText)}&`),d&&(s+=`css=${d}&`),r.innerHTML=`
        <div class="_wm_tools_widget_header">
          <h5>${t.widgetTitleText}</h5>
          <p>${t.widgetDescriptionText}</p>
        </div>
        <div class="_wm_tools_widget_iframe_wrapper"> 
          <iframe
            id="ilpay_iframe"
            class="_wm_tools_widget_iframe"
            src=${s}
          />
        </div>`;const l=document.createElement("a");l.className="_wm_tools_widget_poweredby",l.innerHTML='<img src="undefinedimages/powered_by.svg" />',r.appendChild(l),o.appendChild(r);const c=t!=null&&t.widgetTriggerIcon?t==null?void 0:t.widgetTriggerIcon:"undefinedimages/wm_logo_animated.svg",i=document.createElement("div");return i.className="_wm_tools_widget_trigger",i.style.backgroundColor=t.widgetTriggerBackgroundColor,i.innerHTML=`
        <img
          src="${c}"
          alt="widget trigger"
        />`,i.addEventListener("click",()=>{a<710&&r.classList.toggle("_wm_short_screen"),n<400&&r.classList.toggle("_wm_small_screen"),r.classList.toggle("_wm_tools_widget_open")}),o.appendChild(i),o}})();
